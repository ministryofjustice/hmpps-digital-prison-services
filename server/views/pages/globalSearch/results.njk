{% extends "../../partials/layout.njk" %}
{% from "../../macros/hmppsPagedListFooter.njk" import hmppsPagedListFooter %}
{% from "../../macros/hmppsPagedListHeader.njk" import hmppsPagedListHeader %}
{% from "../../macros/printLink.njk" import printLink %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/details/macro.njk" import govukDetails %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/table/macro.njk" import govukTable %}

{% set pageTitle = "Global search results" %}
{% set mainClasses = "govuk-body govuk-main-wrapper--auto-spacing" %}

{% block beforeContent %}
  {% if backLink %}
    {{ govukBackLink({
      text: "Back",
      href: backLink,
      classes: "govuk-!-display-none-print"
    }) }}
  {% else %}
    {{ govukBreadcrumbs({
      items: [
        {
          text: "Digital Prison Services",
          href: '/'
        },
        {
          text: "Global search",
          href: '/global-search'
        }
      ],
      classes: 'govuk-!-display-none-print'
    }) }}
  {% endif %}
{% endblock %}

{% block content %}
  <div class="govuk-width-container govuk-!-margin-top-8">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        <h1 class="govuk-heading-l">Global search results</h1>
      </div>
    </div>
    <div class="govuk-!-display-none-print">
      {% include "./searchForm.njk" %}
    </div>
    {% if results.length > 0 %}
      <div class=" govuk-grid-row govuk-!-display-none-print">
        <div class="govuk-grid-column-full">{{ hmppsPagedListHeader(listMetadata) }}</div>
      </div>
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
          {% include './searchList.njk' %}
        </div>
      </div>
      <div class=" govuk-grid-row govuk-!-display-none-print">
        <div
          class="govuk-grid-column-full">{{
          hmppsPagedListHeader(
            listMetadata,
            { header: { classes: 'govuk-!-margin-bottom-0 govuk-!-padding-bottom-0' } }
          ) }}</div>
      </div>
    {% else %}
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
          <div class="govuk-body govuk-!-width-one-half govuk-!-padding-left-3" data-qa="no-results-found">
            <p><strong>No results found matching the name or prison number</strong></p>
            <p>You may need to:</p>
            <ul class="govuk-list govuk-list--bullet">
              <li>check that the spelling or prison number is correct</li>
              <li>check you've entered the person's last name and then first name, if you're searching by name</li>
            </ul>
          </div>
        </div>
      </div>
    {% endif %}
  </div>
{% endblock %}
